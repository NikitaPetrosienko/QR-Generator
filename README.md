
# QR Generator Service

–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ **QR-–∫–æ–¥–æ–≤** (—Ç–µ–∫—Å—Ç, —Å—Å—ã–ª–∫–∞, —Ç–µ–ª–µ—Ñ–æ–Ω, email, vCard).  
–ù–∞–ø–∏—Å–∞–Ω –Ω–∞ **Python 3.11 + FastAPI**, —É–ø–∞–∫–æ–≤–∞–Ω –≤ **Docker**.  
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ QR-–∫–æ–¥–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ **PNG** –∏–ª–∏ **SVG** –ø–æ HTTP-–∑–∞–ø—Ä–æ—Å—É.

## üöÄ –ó–∞–ø—É—Å–∫

–°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker build -t qr-service:1.0.0 .
docker run --rm -p 8000:8000 qr-service:1.0.0
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:  
- Swagger UI: [http://localhost:8000/docs](http://localhost:8000/docs)  
- Health-check: [http://localhost:8000/healthz](http://localhost:8000/healthz)  

## üîß API

### `GET /qr`

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–∞.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**

| –ü–∞—Ä–∞–º–µ—Ç—Ä   | –¢–∏–ø    | –û–±—è–∑. | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------|-------|--------------|----------|
| `data`     | string | ‚úÖ     | ‚Äî            | –î–∞–Ω–Ω—ã–µ –¥–ª—è –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è |
| `format`   | string | ‚ùå     | `png`        | –§–æ—Ä–º–∞—Ç: `png` –∏–ª–∏ `svg` |
| `size`     | int    | ‚ùå     | `512`        | –†–∞–∑–º–µ—Ä PNG (64‚Äì2048 px) |
| `level`    | string | ‚ùå     | `M`          | –£—Ä–æ–≤–µ–Ω—å –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –æ—à–∏–±–æ–∫: `L`=7%, `M`=15%, `Q`=25%, `H`=30% |
| `margin`   | int    | ‚ùå     | `2`          | –û—Ç—Å—Ç—É–ø (0‚Äì8 –º–æ–¥—É–ª–µ–π) |
| `download` | int    | ‚ùå     | `0`          | `1` ‚Äî —Å–∫–∞—á–∞—Ç—å —Ñ–∞–π–ª–æ–º, `0` ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å inline |
| `filename` | string | ‚ùå     | `qr`         | –ò–º—è —Ñ–∞–π–ª–∞ –ø—Ä–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–∏ |

**–ü—Ä–∏–º–µ—Ä—ã:**

```bash
# PNG 256x256
curl -o out.png "http://localhost:8000/qr?data=hello&format=png&size=256"

# SVG —Å —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º
curl -o out.svg "http://localhost:8000/qr?data=TEL%3A%2B79991234567&format=svg"

# Email –≤ PNG
curl -o mail.png "http://localhost:8000/qr?data=mailto%3Auser%40example.com&format=png&size=512"

# vCard (–ø—Ä–∏–º–µ—Ä, –¥–∞–Ω–Ω—ã–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å URL-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω—ã)
curl -o card.png "http://localhost:8000/qr?data=BEGIN%3AVCARD%0AVERSION%3A3.0%0AFN%3AIvan%20Ivanov%0AEND%3AVCARD&format=png"
```

### `GET /healthz`

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
```json
{"status": "ok"}
```
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

## üëÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

QR –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä—è–º–æ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –ø–æ—Ä—Ç–∞–ª–∞:

```html
<img src="https://qr.company.local/qr?data=mailto%3Auser%40example.com&format=png&size=512" alt="QR">
```

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –¥–∞–Ω–Ω—ã–µ ‚Üí —Ñ—Ä–æ–Ω—Ç –∫–æ–¥–∏—Ä—É–µ—Ç –∏—Ö –≤ URL ‚Üí –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –≤ `src` –∫–∞—Ä—Ç–∏–Ω–∫–∏.

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- Python 3.11  
- FastAPI  
- Uvicorn  
- qrcode (PIL)  
- Docker  

## üõ†Ô∏è –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –±–µ–∑ Docker

```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
uvicorn main:app --reload
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞: [http://localhost:8000/docs](http://localhost:8000/docs)

## üìå –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- –í –æ—Ç–≤–µ—Ç–∞—Ö –µ—Å—Ç—å `ETag` –∏ `Cache-Control` ‚Üí –±—Ä–∞—É–∑–µ—Ä—ã –∏ –ø—Ä–æ–∫—Å–∏ –±—É–¥—É—Ç –∫—ç—à–∏—Ä–æ–≤–∞—Ç—å QR.  
- CORS –≤–∫–ª—é—á—ë–Ω (`*` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é) ‚Üí –º–æ–∂–Ω–æ –¥–µ—Ä–≥–∞—Ç—å API –∏–∑ JS –Ω–∞ –¥—Ä—É–≥–∏—Ö –¥–æ–º–µ–Ω–∞—Ö.   


